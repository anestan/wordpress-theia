"use strict";jQuery(function(f){var r=null!==window.wc_memberships_frontend?window.wc_memberships_frontend:{};f.fn.select2&&f(".wc-memberships-member-profile-field select").not(".select2-hidden-accessible").select2();var e=f(".wc-memberships-member-profile-field"),s=f(".form-row");function l(e){var i=e.find("span.description");i.is(":visible")||i.prop("aria-hidden",!1).slideDown(250),s.not(e).find(".description").prop("aria-hidden",!0).slideUp(250)}s.not(e).find(".woocommerce-input-wrapper :input").on("keydown click focus",function(){e.find(".description").prop("aria-hidden",!0).slideUp(250)}),e.each(function(){var i=f(this),e=i.find(".description");i.find('.woocommerce-input-wrapper input[type="checkbox"], .woocommerce-input-wrapper input[type="radio"]').off(),e.hide(),i.hasClass("wc-memberships-member-profile-field wc-memberships-member-profile-field-input-file")?i.find("label, .wc-memberships-profile-field-input-file-dropzone").on("click",function(){l(i)}):i.hasClass("wc-memberships-member-profile-field-input-multiselect")?f(this).find("label, .select2-selection").on("click change",function(){l(i)}):(i.hasClass("wc-memberships-member-profile-field-input-select")&&i.find(".select2-selection").on("click change",function(){l(i)}),i.find("input, textarea, select, label").not(".select2-selection").on("keydown click",function(){if(f(this).is("label")){var e=f(this).attr("for"),e=f("#"+e);if(e.is(":text")||e.is("textarea")||e.is("select"))return}l(i)}))}),f(".wc-memberships-member-profile-field-input-file").each(function(){var l=f(this),n=l.find(".wc-memberships-profile-field-input-file-dropzone"),o=l.find(".wc-memberships-profile-field-input-file-preview"),d=l.find(".wc-memberships-profile-field-input-file-upload-progress"),t=l.find(".wc-memberships-profile-field-input-file-feedback"),a=l.find('input[type="hidden"]'),i=a.data("slug"),e={url:r.ajax_url,browse_button:n[0],drop_element:n[0],multi_selection:1<r.max_files,multipart_params:{action:"wc_memberships_upload_profile_field_file",security:r.nonces.profile_field_upload_file,profile_field:i},filters:{max_file_size:r.max_file_size,mime_types:r.mime_types}},s=new plupload.Uploader(e);s.init(),s.bind("Error",function(e,i){i=r.i18n.upload_error.replace("%1$s",i.code).replace("%2$s",i.message);return t.html(i).removeClass("hide"),d.addClass("hide")}),s.bind("FilesAdded",function(e,i){return t.html("").addClass("hide"),n.addClass("disabled"),d.removeClass("hide"),s.start()}),s.bind("UploadProgress",function(e,i){return d.find(".bar").css("width",i.percent+"%")}),s.bind("FileUploaded",function(e,i,s){var r=JSON.parse(s.response);return!r||r.errors?(d.addClass("hide"),n.removeClass("disabled"),r&&r.length?void t.html(r.errors.upload_error).removeClass("hide"):void console.log(s.response)):(f("#woocommerce-register-nonce").val(r.security),a.val(r.id).trigger("change"),o.removeClass("hide").find("a.file").prop("href",r.url).text(r.title),n.addClass("hide").removeClass("disabled"),d.addClass("hide").find(".bar").css("width",0),l.find(".moxie-shim").addClass("hide"))}),l.find("a.remove-file").on("click",function(e){e.preventDefault(),o.addClass("hide").find("a.file").prop("href","").text(""),n.removeClass("hide disabled");e={action:"wc_memberships_remove_profile_field_file",security:r.nonces.profile_field_remove_file,file:a.val(),profile_field:i};return f.post(r.ajax_url,e,function(e){e&&e.success||console.log(e)}).always(function(){a.val("").trigger("change")}),l.find(".moxie-shim").removeClass("hide")})})});